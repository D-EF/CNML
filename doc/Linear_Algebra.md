# 简单的线性代数与几何
最后编辑于 2023-12-12

### 类型说明
* Idx_VM 为向量或矩阵的下标类型 应为 char 或者 int
* var 为全局数值类型, 应为 float 或 doble



## 向量 Vector

### 存储
向量是表示方向的量, 在不同维度的下向量的数据长度有所不同；   
记录时以轴的顺序记录在不同轴上的坐标 : { x(第0轴的坐标) , y(第1轴的坐标), z(第2轴的坐标)....}   
代码中使用数值的指针并携带长度属性代替大部分的向量参数, 例 : 
``` cpp
    // 向量模长
    var mag(Idx_VM length, var*& vec);
```

### 向量的基本运算
####  模 mag
* 向量的模(mag)是指向量的坐标到原点的距离, 用勾股定理即可求;
* 2D向量(x,y) 的模(mag) : $mag=\sqrt{x^2+y^2}$
* n维度向量 $v=(v_0,v_1,v_2,...,v_{n-1})$ 的模(mag) : 
  $$
  mag=|v|=\sqrt{\sum_{i=0}^{n-1}{{v_i}^2}}
  $$
*   ```
    var mag(Idx_VM length, var*& vec){
        var rtn_squares=0;
        for(Idx_VM i=0; i<length; ++i) rtn_squares+=vec[i]*vec[i];
        return sqrt(rtn_squares);
    }
    ```

#### 向量加减 sum / dif
* 向量加减在几何上表示原向量正向或反向平移偏移量后得到新向量, 在运算时只需要将所有对应维度的值相加或相减
* 原向量:($v_0=(v_{0_0}  , v_{0_1}  , v_{0_2}  , ... , v_{0_{n-1}})$)   
  偏移量:($v_1=(v_{1_0}  , v_{1_1}  , v_{1_2}  , ... , v_{1_{n-1}})$)   
  新向量:
  $$
  F_{sum}=v_0+v_1=(v_{0_0}+v_{1_0}, v_{0_1}+v_{1_1}, v_{0_2}+v_{1_2}, ... , v_{0_{n-1}}+v_{1_{n-1}})
  $$
  $$
  F_{dif}=v_0-v_1=(v_{0_0}-v_{1_0}, v_{0_1}-v_{1_1}, v_{0_2}-v_{1_2}, ... , v_{0_{n-1}}-v_{1_{n-1}})
  $$
*   ```
    void sum(var*& out, Idx_VM length, var*& vec_0, var*& vec_1){
        for(Idx_VM i=0; i<length; ++i) out[i]=vec_0[i]+vec_1[i];
    }
    void dif(var*& out, Idx_VM length, var*& vec_0, var*& vec_1){
        for(Idx_VM i=0; i<length; ++i) out[i]=vec_0[i]-vec_1[i];
    }
#### 向量乘标量 np
* 向量乘标量在几何上表示多个相同的向量相加, 在运算时只需要将所有维度的值乘以标量
* 原向量: ($v=(v_{0_0}  , v_{0_1}  , v_{0_2}  , ... , v_{0_n-1})$) 乘以标量 ($k$)   
  新向量: 
  $$
    F_{np}(k,v)=kv=(kv_{0_0}  , kv_{0_1}  , kv_{0_2}  , ... , kv_{0_n-1})
  $$   
* ```
    void np(var*& vec, Idx_VM length, var k){
        for(Idx_VM i=0; i<length; ++i) vec[i]*=k;
    }
  ```

#### 向量点积 dot
* 向量点积计算时需要将两个向量所有对应维度相乘后再相加
* 向量0:($v_0=(v_{0_0}  , v_{0_1}  , v_{0_2}  , ... , v_{0_n-1})$)   
  向量1:($v_1=(v_{1_0}  , v_{1_1}  , v_{1_2}  , ... , v_{1_n-1})$)   
  向量点积 : 
  $$
  F_{dot}(v_0,v_1)=v_0·v_1=\sum_{i=0}^{n-1}{v_{0_i}v_{1_i}}
  $$
* 向量点积的几何应用 :   
  * 点积可以表示点在另一个点上的投影系数(t)与模的乘积 : $dot=t_1|v_1|$;   
  * 由此可以用于计算点($v_0$)在另一个点($v_1$)上的投影的坐标($v$) : 
    $$
    F_{projection'point}(v_0,v_1)=\frac{(v_0·v_1)}{|v_1|}
    $$
  * 使用点积计算两个向量夹角的cos值
    $$
      F_{cosΘ}(v_0,v_1)=\frac{(v_0·v_1)}{|v_0||v_1|}
    $$

#### 向量叉积 cross
* 向量叉积仅适用于2D或3D中
* 几何意义和公式
  * 叉积表示一个向量以某方向旋转到另一个向量时的旋转轴
  * 当叉积为0时，表示两个向量处于同一直线上
  * 2D 叉积, 旋转轴总是在一个虚构的z轴上, 所以直接可以使用一个标量表示, 以叉积的正负表示旋转方向; 
    起始向量(叉积左向量) ($v_0$), 终点向量(叉积右向量) {$v_1$} 
    $$
    F_{cross}(v_0,v_1)=v_0×v_1=v_{0_x}v_{1_y}-v_{0_y}v_{1_x}
    $$
    
    ```
    +y
    ^ 
    |*v_0 {1,2}
    |
    |     *v_1 {2,1}
    +------------> +x

    此处有两点处于坐标系中, 其中x在水平方向的右方向, y在垂直方向的上方向, 虚拟的z在注视内容时的前方向; 
    v_0={1,2}, v_1={2,1}; cross=1*1-2*2=-3;
    此时叉积值为负数, v_0->v_1为顺时针
    ```
  * 3D 叉积, 叉积为一个新的向量, 表示旋转时的旋转轴   
    起始向量(叉积左向量) ($v_0$), 终点向量(叉积右向量) {$v_1$} 
    $$  
    F_{cross}(v_0,v_1)=v_0×v_1=\begin{pmatrix}
       v_{0_y}v_{1_z} - v_{0_z}v_{1_y} \\
       v_{0_z}v_{1_x} - v_{0_x}v_{1_z} \\
       v_{0_x}v_{1_y} - v_{0_y}v_{1_x} \\
    \end{pmatrix}
    $$

## 矩阵 Matrix
todo

### 存储
代码中使用数值的指针并携带宽高属性代替大部分的矩阵参数, 例 : 
``` cpp
    // 设置单位矩阵
    var*& setup_Matrix__Identity(var*& out, Idx_VM width, Idx_VM height);
```

### todo

